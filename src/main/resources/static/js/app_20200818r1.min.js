jQuery.fn.extend({subclass:function(klass){this.each(function(index,e){new klass(e)})}});
var App={is_mobile:false,_focused_section_index:-1,sections:null,_modules:null,init:function(){this._init_modules();
this._init_ui()},_init_modules:function(){this._modules={face:App.Face,product:App.Product,thumbnail:App.Thumbnail,thumbnail_crop:App.ThumbnailCrop,multitag:App.Multitag,adult:App.Adult,ocr:App.OCR};
for(var k in this._modules){this._modules[k].init&&this._modules[k].init()}this.sections=$(".section_link").map(function(i,e){return e.name})},_init_ui:function(){$(".link_tab").on("click",function(e){var hash=e.target.href.split("#")[1];
document.location.hash=hash;
App.goto_section(hash);
e.stopImmediatePropagation();
e.stopPropagation();
e.preventDefault();
return false});
$(".addr_api .inp_addr").on("focus",App.onfocus_input).on("blur",App.onblur_input).map(function(index,e){var e=$(e);if(e.hasClass("inp_empty")){e.val(e.data("alt"))}});
$(".image_file_input").subclass(ImageFile);
$(".image_url_detect").subclass(ImageUrl);
$(window).on("resize",function(){App.onresize()});
$(window).on("scroll",function(){App.onscroll()});
$("#facial_point_check, #facial_angle_check").on("change",function(){App.Face.apply_face_result_option()});
App.onresize();
App.onscroll();
if(document.location.hash){setTimeout(function(){App.goto_section(document.location.hash.slice(1))},100)}},goto_section:function(section_name){$("#kakaoWrap").addClass("tab_fixed");
if(section_name=="face")window.scrollTo(0,(FIX_HEIGHT||450)+1);
else window.scrollTo(0,$("#section_"+section_name).offset().top-60);App.focus_section_tab(section_name)},focus_section_tab:function(section_name){if(section_name.indexOf("_")>0){section_name=section_name.split("_")[0]}$(".list_api .on").removeClass("on");
$(".list_api a[href='#"+section_name+"']").parent().addClass("on")},show_preloader:function(is_show){$(".preloader-background").css("display",is_show?"flex":"none")},show_request_error:function(xhr,text,result_box){console.log("status: "+xhr.status+", "+text);var result="The service has returned processing error.";
switch(xhr.status){case 0:result="Failed to send request.";
break;
case 429:result="Too many requests. Request is temporarily unable to be processed.";
break;
case 500:
	break;
	default:try{result=JSON.parse(text)}catch(e){}}$(result_box).html(JSON.stringify(result,null,4))},show_error:function(error,text){alert(error+":\n"+text)},highlight:function(block){hljs.highlightBlock(block)},run_api:function(section,image_file,image_url){this._modules[section].detect(image_file,image_url)},onresize:function(){this.Face.apply_face_result(face_result);
	this.Product.apply_product_result(product_result);
	this.Thumbnail.apply_thumbnail_result(thumbnail_result);
	this.ThumbnailCrop.apply_thumbnail_crop_result(thumbnail_crop_result);
	this.Multitag.apply_multitag_result(multitag_result);
	this.Adult.apply_adult_result(adult_result);
	this.OCR.apply_ocr_result(text_detect_result,null);
	App._focused_section_index=-1;this.onscroll()},onscroll:function(){
		var section_index=0;
	var top=window.scrollY+window.screen.availHeight/3;
	var links=$(".section_link");
	for(var i=links.length-1;i>=0;i--){if(top>links[i].offsetTop){section_index=i;break}}if(section_index==App._focused_section_index)return;
	App._focused_section_index=section_index;App.focus_section_tab(App.sections[App._focused_section_index])},onfocus_input:function(e){var input=$(e.target);
	if(input.hasClass("inp_empty")){input[0].value="";input.removeClass("inp_empty")}input.select()},onblur_input:function(e){var input=$(e.target);
	if(input.val().length==0){input.addClass("inp_empty");
	input.val(input.data("alt"))}},reset_url_input:function(e){var input=$(e);
	input.addClass("inp_empty").val(input.data("alt"))}};
App.Face={init:function(){$(".list_photo .link_thumb").on("click",App.Face.onclick_sample)},onclick_sample:function(e){$(".list_photo .on").removeClass("on");
	var span=$(e.target);span.parents("li").addClass("on");
	var sample=span.children(".thumb_img")[0];
	App.Face.change_sample(sample)},change_sample:function(sample){var sample_image=$("#face_sample_image").css("backgroundImage","url("+sample.src+")");
	$("#face_url_input").val(sample.src).removeClass("inp_empty");
	var result=face_result_samples[$(sample).data("sample-index")];
	var img=new Image;
	img.onload=function(){App.Face.apply_face_result(result)};
	img.src=sample.src},detect:function(image_file,image_url){$(".list_photo li").removeClass("on");
	App.show_preloader(true);
	$("#face_sample_image_box .face_box_wrapper").remove();
	var fd=new FormData;fd.append("attribute","1");
	if(image_url){fd.append("image_url",image_url)}else{fd.append("image",image_file)}$.post({url:"api/face",data:fd,processData:false,contentType:false,timeout:1e4,beforeSend:function(){}}).done(function(data){var result=JSON.parse(data);face_result=result;App.Face.apply_face_result(face_result)}).fail(function(xhr,error,text){App.show_request_error(xhr,xhr.responseText,"#face_result")}).always(function(){App.show_preloader(false)})},apply_face_result:function(resp){$("#face_result").html(JSON.stringify(resp,null,4));$("#face_sample_image_box .face_box_wrapper").remove();
	var face_sample_image=$("#face_sample_image_box");
	var image_width=resp.result.width;
	var image_height=resp.result.height;
	var box_width=face_sample_image.width();
	var box_height=face_sample_image.height();
	var x_scale=box_width/image_width;
	var y_scale=box_height/image_height;
	var scale=Math.max(x_scale,y_scale);
	var scaled_width=image_width*scale;
	var scaled_height=image_height*scale;
	var image_left=-(scaled_width-box_width)/2;
	var image_top=-(scaled_height-box_height)/2;
	var face_mask_canvas=$("#face_mask_canvas").show();face_mask_canvas.css({left:image_left,top:image_top,width:scaled_width,height:scaled_height});face_mask_canvas[0].width=scaled_width;face_mask_canvas[0].height=scaled_height;var face_mask_ctx=face_mask_canvas[0].getContext("2d");face_mask_ctx.fillStyle="rgba(0,0,0,0.27)";
	face_mask_ctx.fillRect(0,0,scaled_width,scaled_height);
	var result_box_wrapper=$("<div class='face_box_wrapper result_box_wrapper'></div>");
	result_box_wrapper.css({left:image_left,top:image_top,width:scaled_width,height:scaled_height});
	$("#face_sample_image_box").append(result_box_wrapper);
	for(var i=0;i<resp.result.faces.length;i++){var face=resp.result.faces[i];
	var info=face.facial_attributes.gender.male>.5?"남":"여";info+=Math.floor(face.facial_attributes.age);
	var rect=$("<div class='face_rect'><span class='info'>"+info+"</span></div>");
	var x=face.x*100;var y=face.y*100;var w=face.w*100;
	var h=face.h*100;rect.css({left:x+"%",top:y+"%",width:w+"%",height:h+"%"});
	result_box_wrapper.append(rect);
	face_mask_ctx.clearRect(face.x*scaled_width,face.y*scaled_height,face.w*scaled_width+2,face.h*scaled_height+2);
	var canvas=$("<canvas class='facial_point' width='100' height='100' style='position:absolute;'></canvas>");
	canvas.css({left:x+"%",top:y+"%",width:w+"%",height:h+"%"});
	result_box_wrapper.append(canvas);canvas[0].width=100;
	canvas[0].height=100;var ctx=canvas[0].getContext("2d");ctx.fillStyle="rgba(255,255,255,1.0)";
	var ctx_scale_x=100/face.w;var ctx_scale_y=100/face.h;
	for(var region in face.facial_points){var points=face.facial_points[region];for(var k=0;k<points.length;k++){ctx.beginPath();
	ctx.ellipse((points[k][0]-face.x)*ctx_scale_x,(points[k][1]-face.y)*ctx_scale_y,1,1,0,0,2*Math.PI);ctx.fill();ctx.closePath()}}canvas=$("<canvas class='facial_angle' width='400' height='400' style='position:absolute;'></canvas>");
	canvas.css({left:x+"%",top:y+"%",width:w+"%",height:h+"%"});result_box_wrapper.append(canvas);ctx=canvas[0].getContext("2d");
	canvas[0].width=400;canvas[0].height=400;FaceCube.draw(ctx,face,400,400)}this.apply_face_result_option();setTimeout(App.highlight,100,$("#face_result")[0])},apply_face_result_option:function(){return;$("#facial_point_check").prop("checked")?$(".facial_point").show():$(".facial_point").hide();
	$("#facial_angle_check").prop("checked")?$(".facial_angle").show():$(".facial_angle").hide()}};
	App.Product={detect:function(image_file,image_url){App.show_preloader(true);$("#product_sample_image_box .product_box_wrapper").remove();var fd=new FormData;if(image_url){fd.append("image_url",image_url)}else{fd.append("image",image_file)}$.post({url:"api/product",data:fd,processData:false,contentType:false,timeout:1e4,beforeSend:function(){}}).done(function(data){var result=JSON.parse(data);product_result=result;App.Product.apply_product_result(product_result)}).fail(function(xhr,error,text){App.show_request_error(xhr,xhr.responseText,"#product_result")}).always(function(){App.show_preloader(false)})},apply_product_result:function(resp){$("#product_result").html(JSON.stringify(resp,null,4));$("#product_sample_image_box .product_box_wrapper").remove();var prduct_sample_image=$("#product_sample_image_box");var image_width=resp.result.width;var image_height=resp.result.height;var box_width=prduct_sample_image.width();var box_height=prduct_sample_image.height();var x_scale=box_width/image_width;var y_scale=box_height/image_height;var scale=Math.max(x_scale,y_scale);var scaled_width=image_width*scale;var scaled_height=image_height*scale;var image_left=-(scaled_width-box_width)/2;var image_top=-(scaled_height-box_height)/2;var product_mask_canvas=$("#product_mask_canvas").show();product_mask_canvas.css({left:image_left,top:image_top,width:scaled_width,height:scaled_height});product_mask_canvas[0].width=scaled_width;product_mask_canvas[0].height=scaled_height;var ctx=product_mask_canvas[0].getContext("2d");ctx.fillStyle="rgba(0,0,0,0.27)";
	ctx.fillRect(0,0,scaled_width,scaled_height);var result_box_wrapper=$("<div class='product_box_wrapper result_box_wrapper'></div>");
	result_box_wrapper.css({left:image_left,top:image_top,width:scaled_width,height:scaled_height});$("#product_sample_image_box").append(result_box_wrapper);
	for(var i=0;i<resp.result.objects.length;i++){var obj=resp.result.objects[i];
	var info=obj["class"];var x=obj.x1*100;var y=obj.y1*100;var w=(obj.x2-obj.x1)*100;var h=(obj.y2-obj.y1)*100;var info_class=x>50?"info":"info info_right";
	var rect=$("<div class='product_rect'><span class='"+info_class+"'>"+info+"</span></div>");
	rect.css({left:x+"%",top:y+"%",width:w+"%",height:h+"%",zIndex:Math.floor(obj.y1*100)});
	result_box_wrapper.append(rect);ctx.clearRect(obj.x1*scaled_width,obj.y1*scaled_height,(obj.x2-obj.x1)*scaled_width+2,(obj.y2-obj.y1)*scaled_height+2)}setTimeout(App.highlight,100,$("#product_result")[0])}};
	App.Thumbnail={detect:function(image_file,image_url){App.show_preloader(true);$("#thumbnail_mask_canvas").hide();
	var fd=new FormData;fd.append("width","200");fd.append("height","200");
	if(image_url){fd.append("image_url",image_url)}else{fd.append("image",image_file)}$.post({url:"api/thumbnail_detect",data:fd,processData:false,contentType:false,timeout:1e4,beforeSend:function(){}}).done(function(data){var result=JSON.parse(data);thumbnail_result=result;App.Thumbnail.apply_thumbnail_result(thumbnail_result)}).fail(function(xhr,error,text){App.show_request_error(xhr,xhr.responseText,"#thumbnail_result")}).always(function(){App.show_preloader(false)})},apply_thumbnail_result:function(resp){$("#thumbnail_result").html(JSON.stringify(resp,null,4));var thumbnail_sample_image=$("#thumbnail_sample_image_box");var image_width=resp.result.width;var image_height=resp.result.height;
	var box_width=thumbnail_sample_image.width();var box_height=thumbnail_sample_image.height();var x_scale=box_width/image_width;var y_scale=box_height/image_height;var scale=Math.max(x_scale,y_scale);var scaled_width=image_width*scale;var scaled_height=image_height*scale;var image_left=-(scaled_width-box_width)/2;var image_top=-(scaled_height-box_height)/2;var thumbnail_mask_canvas=$("#thumbnail_mask_canvas").show();
	thumbnail_mask_canvas.css({left:image_left,top:image_top,width:scaled_width,height:scaled_height});
	thumbnail_mask_canvas[0].width=scaled_width;thumbnail_mask_canvas[0].height=scaled_height;
	var clip_rect={x:resp.result.thumbnail.x*scale,y:resp.result.thumbnail.y*scale,width:resp.result.thumbnail.width*scale,height:resp.result.thumbnail.height*scale};var ctx=thumbnail_mask_canvas[0].getContext("2d");ctx.fillStyle="rgba(0,0,0,0.27)";if(clip_rect.x>0){ctx.fillRect(0,0,clip_rect.x,scaled_height)}if(clip_rect.y>0){ctx.fillRect(0,0,scaled_width,clip_rect.y)}var ex=clip_rect.x+clip_rect.width;
	var ey=clip_rect.y+clip_rect.height;
	ctx.fillRect(ex,0,scaled_width-ex,scaled_height);
	ctx.fillRect(0,ey,scaled_width,scaled_height-ey);
	ctx.lineWidth=2;ctx.strokeStyle="rgba(255,255,255,1.0)";
	ctx.setLineDash([5,2]);ctx.rect(clip_rect.x+1,clip_rect.y+1,clip_rect.width-2,clip_rect.height-2);ctx.stroke();
	setTimeout(App.highlight,100,$("#thumbnail_result")[0])}};
	App.ThumbnailCrop={detect:function(image_file,image_url){App.show_preloader(true);
	$("#thumbnail_crop_mask_canvas").hide();
	$("#thumbnail_crop_preview_box").hide();
	var fd=new FormData;fd.append("width","200");fd.append("height","200");
	if(image_url){fd.append("image_url",image_url)}else{fd.append("image",image_file)}$.post({url:"api/thumbnail_crop",data:fd,processData:false,contentType:false,timeout:1e4,beforeSend:function(){}}).done(function(data){var result=JSON.parse(data);thumbnail_result=result;
	App.ThumbnailCrop.apply_thumbnail_crop_result(thumbnail_result)}).fail(function(xhr,error,text){App.show_request_error(xhr,xhr.responseText,"#thumbnail_crop_result")}).always(function(){App.show_preloader(false)})},apply_thumbnail_crop_result:function(resp){$("#thumbnail_crop_result").html(JSON.stringify(resp,null,4));$("#thumbnail_crop_preview_image")[0].src=resp.thumbnail_image_url;
	$("#thumbnail_crop_preview_box").show();
	setTimeout(App.highlight,100,$("#thumbnail_crop_result")[0])}};
	App.Multitag={detect:function(image_file,image_url){App.show_preloader(true);
	var fd=new FormData;
	if(image_url){fd.append("image_url",image_url)}else{fd.append("image",image_file)}$.post({url:"api/multitag",data:fd,processData:false,contentType:false,timeout:1e4,beforeSend:function(){}}).done(function(data){var result=JSON.parse(data);multitag_result=result;App.Multitag.apply_multitag_result(multitag_result)}).fail(function(xhr,error,text){App.show_request_error(xhr,xhr.responseText,"#multitag_result")}).always(function(){App.show_preloader(false)})},apply_multitag_result:function(resp){$("#multitag_result").html(JSON.stringify(resp,null,4));setTimeout(App.highlight,100,$("#multitag_result")[0]);var tags=resp.result.label_kr;var html=[];for(var i=0;i<tags.length;i++){html.push('<span class="info_tag">#'+tags[i]+"</span>")}$(".demo_tag").html(html.join("\n"))}};
	App.Adult={detect:function(image_file,image_url){App.show_preloader(true);
	var fd=new FormData;
	if(image_url){fd.append("image_url",image_url)}else{fd.append("image",image_file)}$.post({url:"api/adult",data:fd,processData:false,contentType:false,timeout:1e4,beforeSend:function(){}}).done(function(data){var result=JSON.parse(data);
	adult_result=result;
	App.Adult.apply_adult_result(adult_result)}).fail(function(xhr,error,text){App.show_request_error(xhr,xhr.responseText,"#adult_result")}).always(function(){App.show_preloader(false)})},apply_adult_result:function(resp){$("#adult_result").html(JSON.stringify(resp,null,4));setTimeout(App.highlight,100,$("#adult_result")[0])}};
	App.OCR={detect:function(image_file,image_url){App.show_preloader(true);
	var fd=new FormData;	
	var reader = new FileReader();
	reader.onload = function(event) {
	    var data = event.target.result;	    
	};
	ocr_img= reader.readAsArrayBuffer(image_file);
	function ArrayBufferToBinary(buffer) {
	    var uint8 = new Uint8Array(buffer);
	    return uint8.reduce((binary, uint8) => binary + uint8.toString(2), "");
	}
	ocr_imgs=ArrayBufferToBinary(ocr_img);
	fd.append("image",image_file);
	$.post(
			{url:"https://dapi.kakao.com/v2/vision/text/ocr", 
				headers: { 'Host': 'dapi.kakao.com','Authorization': 'KakaoAK'+' 369dd298742c946f09cf5d8ad25f907c'}, 
				image : ocr_imgs,				
				data:fd,
				processData:false,
				contentType:false,
				timeout:1e4}
			).done(function(data)
					{
				//var result=JSON.parse(data);
				var result1=JSON.stringify(data);
				var result=JSON.parse(result1);
				text_detect_result=result;
				
				//App.OCR.apply_ocr_result(text_detect_result,image_file_input)
				App.OCR.apply_ocr_result(text_detect_result,image_file)
				}).fail(function(xhr,error,text)
						{App.show_request_error(xhr,xhr.responseText,"#ocr_result")
					}).always(function(){App.show_preloader(false)})},drawRect:function(ratio,box,ctx,color){ctx.beginPath();
					ctx.strokeStyle=color;
					ctx.moveTo(box[3][0]*ratio,box[3][1]*ratio);
					box.forEach(function(b,j){ctx.lineTo(b[0]*ratio,b[1]*ratio);
					ctx.stroke()})},getMousePos:function getMousePos(canvas,evt){var rect=canvas.getBoundingClientRect();
					return{x:evt.clientX-rect.left,y:evt.clientY-rect.top}},iscollide:function(ratio,box,pos){res=App.OCR.getBB(box);
					minx=res["x"]*ratio;
					miny=res["y"]*ratio;
	maxx=(res["w"]+res["x"])*ratio;maxy=(res["h"]+res["y"])*ratio;
	if(pos.x>=minx&&pos.x<=maxx){if(pos.y>=miny&&pos.y<=maxy){return true}else{return false}}else{return false}},getBB:function(box){minmax=App.OCR.getMinMax(box);minx=minmax["min"]["x"];miny=minmax["min"]["y"];maxx=minmax["max"]["x"];maxy=minmax["max"]["y"];return{x:minx,y:miny,w:maxx-minx,h:maxy-miny}},getMinMax:function(box){lt=box[0];rt=box[1];
	rb=box[2];lb=box[3];
	minx=Math.min(lt[0],lb[0]);
	miny=Math.min(lt[1],rt[1]);
	maxx=Math.max(rt[0],rb[0]);
	maxy=Math.max(lb[1],rb[1]);
	return{min:{x:minx,y:miny},max:{x:maxx,y:maxy}}},apply_ocr_result:function(resp,image_file){$("#ocr_result").html(JSON.stringify(resp,null,4));
	var ocr_sample_image=$("#ocr_sample_image_box");
	var image_width=parseInt($("#ocr_sample_image").attr("org_width"));
	var image_height=parseInt($("#ocr_sample_image").attr("org_height"));
	var box_width=ocr_sample_image.width();
	var box_height=ocr_sample_image.height();
	var x_scale=box_width/image_width;
	var y_scale=box_height/image_height;
	var scale=Math.max(x_scale,y_scale);
	var scaled_width=image_width*scale;
	var scaled_height=image_height*scale;
	var image_left=-(scaled_width-box_width)/2;
	var image_top=-(scaled_height-box_height)/2;
	var ocr_mask_canvas=$("#ocr_mask_canvas").show();
	ocr_mask_canvas.css({left:image_left,top:image_top,width:scaled_width,height:scaled_height});
	ocr_mask_canvas[0].width=scaled_width;
	ocr_mask_canvas[0].height=scaled_height;
	var ocr_mask_ctx=ocr_mask_canvas[0].getContext("2d");
	ocr_mask_ctx.fillStyle="rgba(0,0,0,0.27)";
	ocr_mask_ctx.fillRect(0,0,scaled_width,scaled_height);	
	//var resps=resp.result;
	var resps=$.map(resp.result, function(value, index){return [value];})
	resps.forEach(function(v,i){App.OCR.drawRect(scale,v.boxes,ocr_mask_ctx,"rgba(0, 255, 144, 1.0)")});	
	$("#ocr_sample_image_box").off();
	setTimeout(App.highlight,100,$("#ocr_result")[0])}};
	function ImageFile(e){
		this.init(e)
		}$.extend(ImageFile.prototype,{
			init:function(e){this.elm=$(e);
	this.section=this.elm.data("section");
	this.elm.bind("change",this.on_change.bind(this))},on_change:function(e){
		var file=this.elm[0].files[0];
	if(!file)
		return;
	App.reset_url_input($("#"+this.section+"_url_input")[0]);
	this.load_image(file);
	App.run_api(this.section,file,null)},load_image:function(file){
		var sample_image=$("#"+this.section+"_sample_image");
	var reader=new FileReader;
	reader.onload=function(e){sample_image[0].style.backgroundImage="url("+e.target.result+")";
	var img=new Image;
	img.src=e.target.result;
	img.onload=function(){sample_image.attr("org_width",this.width);
	sample_image.attr("org_height",this.height)}};
	reader.readAsDataURL(file)}});
	function ImageUrl(e){this.init(e)}$.extend(ImageUrl.prototype,{init:function(e){this.elm=$(e);
	this.section=this.elm.data("section");
	this.input=$("#"+this.section+"_url_input");
	this.elm.bind("click",this.on_click.bind(this))},on_click:function(e){e.stopPropagation();
	e.preventDefault();
	var url=this.input.val();
	if(this.input.hasClass("inp_empty")||!url)return;
	var sample_image=$("#"+this.section+"_sample_image");
	sample_image[0].style.backgroundImage="url("+url+")";
	App.run_api(this.section,null,url)},load_image:function(){var sample_image=$("#"+this.section+"_sample_image");
	var reader=new FileReader;
	reader.onload=function(e){sample_image[0].style.backgroundImage="url("+e.target.result+")"};
	reader.readAsDataURL(file)}});
	function Point3D(x,y,z){this.x=x;this.y=y;this.z=z;
	this.rotateX=function(rad){var rad,cosa,sina,y,z;cosa=Math.cos(rad);
	sina=Math.sin(rad);y=this.y*cosa-this.z*sina;z=this.y*sina+this.z*cosa;
	return new Point3D(this.x,y,z)};
	this.rotateY=function(rad){var rad,cosa,sina,x,z;
	cosa=Math.cos(rad);sina=Math.sin(rad);
	z=this.z*cosa-this.x*sina;
	x=this.z*sina+this.x*cosa;
	return new Point3D(x,this.y,z)};
	this.rotateZ=function(rad){var rad,cosa,sina,x,y;cosa=Math.cos(rad);sina=Math.sin(rad);
	x=this.x*cosa-this.y*sina;y=this.x*sina+this.y*cosa;return new Point3D(x,y,this.z)};
	this.project=function(viewWidth,viewHeight,fov,viewDistance){var factor,x,y;factor=fov/(viewDistance+this.z);
	x=this.x*factor+viewWidth/2;
	y=this.y*factor+viewHeight/2;
	return new Point3D(x,y,this.z)}}var FaceCube={draw:function(ctx,face,w,h){var vertices=[new Point3D(-1,1,0),new Point3D(1,1,0),new Point3D(1,-1,0),new Point3D(-1,-1,0),new Point3D(-.8,.8,-1.2),new Point3D(.8,.8,-1.2),new Point3D(.8,-.8,-1.2),new Point3D(-.8,-.8,-1.2),new Point3D(-.6,.6,-.5),new Point3D(.6,.6,-.5),new Point3D(.6,-.6,-.5),new Point3D(-.6,-.6,-.5)];var faces=[[0,1,2,3],[1,5,6,2],[5,4,7,6],[4,0,3,7],[0,4,5,1],[3,2,6,7]];var faces=[[0,1,2,3],[4,5,6,7],[0,4],[1,5],[2,6],[3,7]];var angle=37;var t=[];ctx.fillStyle="rgb(0,0,0)";for(var i=0;i<vertices.length;i++){var v=vertices[i];var r=v.rotateX(-face.pitch).rotateY(face.yaw).rotateZ(-face.roll);var p=r.project(w,h,1e3,9);t.push(p)}ctx.strokeStyle="rgba(0,255,144, 1.0)";ctx.lineWidth=3;ctx.strokeStyle="rgba(0,128,50, 1.0)";for(var i=0;i<faces.length;i++){if(i>1){ctx.strokeStyle="rgba(0,255,144, 1.0)"}else if(i>0){ctx.strokeStyle="rgba(0,255,144, 1.0)"}var f=faces[i];ctx.beginPath();ctx.moveTo(t[f[0]].x,t[f[0]].y);ctx.lineTo(t[f[1]].x,t[f[1]].y);if(f.length>2){ctx.lineTo(t[f[2]].x,t[f[2]].y);ctx.lineTo(t[f[3]].x,t[f[3]].y);ctx.closePath()}ctx.stroke()}}};var product_result={result:{width:900,objects:[{y2:.858974,x2:.883333,score:.993,y1:.644872,x1:.684444,class:"shoes"},{y2:.710256,x2:.876667,score:.995,y1:.101282,x1:.564444,class:"tote bag"},{y2:.970513,x2:.393333,score:.981,y1:.787179,x1:.072222,class:"tote bag"},{y2:.985897,x2:.494444,score:.963,y1:.407692,x1:.081111,class:"one-piece"}],height:780}};var thumbnail_result={result:{height:780,width:900,thumbnail:{height:780,x:107,y:0,width:780}}};var thumbnail_crop_result={thumbnail_image_url:"http://k.kakaocdn.net/dn/txyQ2/btqFWclOw2s/WCikzo6I9lxm72C8Kq2Dw1/img.jpg"};var multitag_result={result:{label_kr:["사람","여러사람","전자제품","여성"],label:["human","people","electronics","female"]}};var adult_result={result:{normal:.113,soft:.883,adult:.003}};var text_detect_result={result:[{boxes:[[340,458],[525,464],[524,512],[339,506]],recognition_words:["Under"]},{boxes:[[343,519],[434,525],[431,563],[340,557]],recognition_words:["the"]},{boxes:[[350,572],[476,589],[471,628],[346,612]],recognition_words:["Step"]}]};var face_result_samples=[{result:{width:900,height:780,faces:[{facial_attributes:{gender:{male:.0001852084242273122,female:.9998148083686829},age:26.83161163330078},facial_points:{jaw:[[.39988815155929,.4597163545375075],[.40076365725357194,.4919288974017492],[.40546697996929376,.5238266913226928],[.4138891439360871,.5546161695020512],[.42467514802233847,.5836692674509779],[.43806688492406104,.6110579700894445],[.45364497658812786,.6353582361319029],[.47173999183849896,.6556910619735179],[.4964329642348522,.6629302561661311],[.5272498964440828,.6558442937681535],[.5574304000523214,.6365127986404545],[.5853054403708957,.6116739215797226],[.6075996216326539,.5813461707437183],[.621242128057884,.5464769590386854],[.6273095232652657,.5079275694928798],[.6287490368456476,.4691592717577292],[.6282002502785117,.4302802243568629]],right_eyebrow:[[.39599309794482057,.42201739908918495],[.4051166985134195,.4140428482233955],[.4177621539408728,.41333816389932526],[.4316635831925265,.4177477403616378],[.44443900001597814,.4254196985996625]],left_eyebrow:[[.4835053956530918,.4206912659581911],[.503182329137454,.4094101500124181],[.5255417504739469,.40325481322780454],[.5480393513535383,.4043782347764472],[.5686317072466676,.41436874931622114]],nose:[[.4654094589327385,.4547987133930385],[.46318292807917333,.47811415642314103],[.46089826953399465,.5013969935923374],[.45857568737977356,.5244732639693],[.4496086377354352,.5396099442091116],[.45837532567714034,.544609352031824],[.4686119698371557,.5475862513809354],[.48168133558490733,.5434536396547478],[.4944650046839767,.5382375997523046]],right_eye:[[.4142208936067651,.45665297877468847],[.42335795787565844,.4505984248159411],[.43540374794155495,.4507062919345331],[.4471211738857448,.45759592609563415],[.4353429172713271,.4622121047913335],[.4236897348491508,.46282369308186716]],left_eye:[[.5045749364828938,.4539066044373463],[.516424535351039,.44473413471897427],[.531202388354105,.44370407304356396],[.5454936915551986,.44806726491220333],[.5323012720234628,.4560796748053783],[.5180910991350183,.4574687632381]],lip:[[.4486181121102725,.5803562757085547],[.4549785006434541,.5735871729714412],[.4645470858921278,.5698794297893226],[.4747330560288295,.5714956251314866],[.48815476459493384,.5673231775491484],[.5075825189447206,.5697361845240662],[.5283479200747906,.5750310613027585],[.512129638847064,.5931472556612033],[.4945204566997903,.6033978767619163],[.47955683534832666,.6064533924645459],[.46720857105436964,.6043426276437671],[.45656514226431644,.5950960780394812],[.45424711285437747,.5808172312223513],[.46580626438415496,.5805804055611318],[.47638351115238037,.5811021465905016],[.4918218874900453,.5782507561784437],[.5203299026036047,.5770582952634475],[.4935242452635527,.5859178904817328],[.47769285856565696,.5893859254555084],[.4662694020228778,.5874273055673349]]},score:.9966461062431335,class_idx:0,x:.36406812879774303,y:.3577516213441506,w:.28629075792100694,h:.3303354899088542,pitch:-.2745622396469116,yaw:.3854277431964874,roll:-.002884101588279009}]}},{result:{width:900,height:780,faces:[{facial_attributes:{gender:{male:.9985451698303223,female:.0014548279577866197},age:18.882884979248047},facial_points:{jaw:[[.32693879861840186,.43721824054338676],[.32834549555661985,.4907536197661022],[.33297319665491076,.5441093196345882],[.34100738461345825,.5967433060910461],[.3571311034070649,.6464963620161609],[.3829324886548436,.6917639885422716],[.41636824116450183,.7304993355850438],[.45487391052003656,.7600458164002077],[.4999545682838587,.7706229418177808],[.5449556986425337,.7620529724190643],[.5829745138383118,.7322306763912619],[.6157357458170979,.6939931007352406],[.64092567833297,.648845819085495],[.6562715824941728,.5992443077099577],[.6650751090594567,.5474462153680463],[.6703853988304229,.49488179109689673],[.6728193711775982,.4423671164150418]],right_eyebrow:[[.3570916580528732,.39378050125268105],[.3802440863118414,.37166750328512344],[.4105243000216433,.3656213785331673],[.44191718111964695,.3716290432023057],[.4710860406283221,.3870701150255729]],left_eyebrow:[[.538779899208344,.38800627166612195],[.5678667541635255,.37431439035173864],[.5984296512880456,.3688288093974836],[.6277789247937616,.37516893195308926],[.648629709174352,.39820341651617547]],nose:[[.5043422645473765,.43467544421874776],[.5040752299453047,.46986486460488286],[.5043807847015834,.5043458756339029],[.5041762060726808,.538702317548242],[.46399134848662327,.5614087693440747],[.48329659126675684,.5691488366184645],[.5033277280478877,.5760706872973466],[.5231324594391836,.5700677691568591],[.5419765148978493,.5625885256406503]],right_eye:[[.3918356980572021,.436192932960231],[.412015165287513,.4256339442180353],[.43434205152776356,.42663232228192816],[.4542265888790409,.44155286004295513],[.4329892400273715,.4464506577497176],[.41133795869216877,.44542382347173576]],left_eye:[[.5531555968822341,.44360469197356406],[.5730514952913897,.42938134867608024],[.5959201706840442,.42881261467718823],[.6150617028087986,.44040599081913684],[.5960694561783699,.4488931284143575],[.5740890324614689,.4490262607947545]],lip:[[.4282994212010672,.6234163635810042],[.45389532749092576,.6112646533312344],[.480689198638555,.6064695918552491],[.5027731850634347,.6118855015745654],[.5245032874683124,.6070710866589051],[.550741083579901,.6134894953702538],[.5746876269032638,.6259872487946613],[.5537858271944779,.656083592283198],[.5280076266624479,.6738070039979943],[.5018606394267894,.6777551516073054],[.4758972596203772,.6731920329557984],[.44966589016674774,.6550705556531932],[.438952462329564,.6257581527394824],[.4773339061774588,.6228512339593707],[.5023320735867988,.6256157224432274],[.5281399004151172,.6235621457185315],[.5641576771662965,.6281510459984546],[.5291654597273283,.6460646632265445],[.5021962184148335,.6509474694788495],[.4755484094841635,.6456787423238934]]},score:.9966499209403992,class_idx:0,x:.28450171576605904,y:.3069488721016126,w:.41726559109157985,h:.4814603169759114,pitch:-.20059093832969666,yaw:-.024678118526935577,roll:-.03736267611384392}]}},{result:{width:900,height:780,faces:[{facial_attributes:{gender:{male:.0009487771894782782,female:.9990512728691101},age:23.250158309936523},facial_points:{jaw:[[.3057473008895957,.4887159948682641],[.32063153607012246,.527853484056927],[.34053842453360916,.5652787094928965],[.3657113042041884,.5989848133381486],[.39169584389242745,.6298572346325576],[.4175170134750321,.6566974469605638],[.4439055495151163,.6781880384686146],[.47141624482226485,.6927848418010885],[.5029446087073851,.6877047841964686],[.5386463758896198,.6620840095832851],[.5690426069659814,.6211442081990651],[.5937353886689072,.5763959980062907],[.6093964104277741,.5262213504327791],[.6132750703429078,.47522043787073276],[.6054109521206442,.42318875945562756],[.591919738389862,.37235354767071566],[.575675477883426,.323311457408612]],right_eyebrow:[[.27756637484888297,.4378874997747643],[.28403022916140697,.4232741062145029],[.296543434289031,.41431706238201194],[.3139092719492029,.41058239165067556],[.33148196358064563,.4109735381750542]],left_eyebrow:[[.3802019192029499,.3780410964300949],[.40046369305713675,.35231519440182757],[.4261601157534508,.3316175642873933],[.455185858016824,.31985203669134005],[.4864408420791183,.32247156873099675]],nose:[[.3729501745003452,.4399659575432405],[.37892350131474734,.4704263769864365],[.3853038417684139,.5010530121531086],[.3907862627110306,.5310931234367122],[.38905270011318827,.5590937113730579],[.4023655155125727,.5577776876357307],[.41585573965069644,.5552634061505002],[.43012492844119776,.5426356009054583],[.44476315767816976,.5293794267898511]],right_eye:[[.3125976444956113,.476838018663488],[.32116447052422314,.4632718468502451],[.3358547795003154,.45501237619883456],[.3533337702896525,.4559536309443427],[.3409445844066585,.46944540420571196],[.327209387576138,.4782128806175845]],left_eye:[[.4236654884880813,.4135661698656058],[.43388644775086627,.3951355686310401],[.4520697665619826,.3847523473220649],[.47288821539218284,.3817743902396918],[.4592675396571495,.3997553089842231],[.44195958346560493,.4102800733702209]],lip:[[.4098371729287836,.6155672049858418],[.41347210199328804,.6014314129629174],[.421218846764755,.5898927192303335],[.4340148813549038,.5853680200606305],[.44967801812553077,.571303469744616],[.4751224827695065,.5641291477577304],[.5030996060829784,.5592299258748935],[.4908621868466046,.5890225494689357],[.4729849238198189,.6117450493488641],[.4557277861218495,.6247729679013196],[.4395817087301483,.6298428161349932],[.42462391867962523,.6262598642681686],[.4164495146495109,.6130698943409125],[.42714957258540215,.6037047219492562],[.44015425599625124,.5960749635066933],[.4606526007071273,.5828694556333041],[.49466206742461916,.566120198981965],[.4655845752863452,.5903314087354234],[.44591541220431585,.604603258537384],[.43095936849377825,.6104513250270247]]},score:.9941351413726807,class_idx:0,x:.23168752034505208,y:.24008673643454528,w:.40692671034071176,h:.469530760936248,pitch:-.34809088706970215,yaw:.4402325749397278,roll:.6212780475616455}]}},{result:{width:900,height:780,faces:[{facial_attributes:{gender:{male:9.238507345799007e-7,female:.9999990463256836},age:26.107303619384766},facial_points:{jaw:[[.39343878670506904,.3583901550108344],[.38088482679515767,.39390720600973095],[.37281404862882206,.4312982775158666],[.3692490748402714,.46924712625868364],[.36823892253630724,.5069834440826303],[.3700431445392735,.5430197996789279],[.3760392916516851,.5781836589236403],[.3858997042785931,.610639740063903],[.40901552262157526,.633203562837421],[.44586399242105923,.6441734732848776],[.48710732384931515,.6415770263307562],[.5284495227373975,.6301708391951756],[.5661809959994216,.6100498389337512],[.5961683375518803,.5795541896733406],[.6193664342466251,.5402236523551032],[.6383699082485628,.49830543087261997],[.6552801564043945,.45510040985389005]],right_eyebrow:[[.4050139315809413,.31114992152699],[.41964031093826476,.30755885277746114],[.4343526340659648,.31413272958092003],[.44828237796425024,.32709517679347794],[.45920072100898773,.342708515257123]],left_eyebrow:[[.5044179345605355,.3596063295019989],[.5310970257730935,.3593450139839619],[.557965549114377,.3650560624922358],[.5810323332168903,.3797110492221467],[.5981550109144139,.4018903071727395]],nose:[[.4685649183245292,.3881426778717063],[.4561723933346496,.4118335075717327],[.44389948454502,.4353869648586764],[.43139595914785694,.4590959759220781],[.41532678041824295,.4724627470032787],[.42270580348627934,.4824033622842175],[.43215269099837156,.4908997709509053],[.44796030710307566,.49461137320574877],[.46377862293537414,.4971197740802521]],right_eye:[[.4105935882960629,.3608803555137414],[.4234799728451213,.3594383158366831],[.4366212398966268,.3667409607047515],[.4465253739662375,.38053944650103894],[.43186925941521465,.3791019117723548],[.41870838031490065,.3733367373548166]],left_eye:[[.5117753769616765,.4107101882400961],[.529051606869988,.4069298997787113],[.5455982784469023,.4141970182817526],[.5597682266993879,.42686395418671547],[.5421212541128464,.42875423622701],[.5255801671512584,.42216482733097604]],lip:[[.39592102466420415,.5182676554641288],[.4056082483208286,.5132789668739638],[.4175469697756182,.5137630492378734],[.4272968844458843,.521022364866199],[.4434856464281653,.5258945520699266],[.46295605357703695,.5399676686430533],[.4824529011613034,.558280816014499],[.4576845885537316,.5683960598216576],[.43500505386855454,.5685742048687602],[.41712270374872934,.5631675825237248],[.40546528875799015,.5545185948671637],[.39799922641244084,.538722801242307],[.40153112494606064,.5216248874550868],[.4148465611584454,.5269242844255272],[.4250219609161731,.5335584006573257],[.44242891036022136,.5411269420246894],[.47309208097302413,.5555727147702922],[.4411910120068966,.5487002924719631],[.4229096501825876,.5422502328439944],[.41232726540527886,.534241765210077]]},score:.994019627571106,class_idx:0,x:.31991336398654513,y:.2776720487154447,w:.34548044840494796,h:.3986312866210937,pitch:-.1604008674621582,yaw:.5857350826263428,roll:-.5796306729316711}]}},{result:{width:900,height:780,faces:[{facial_attributes:{gender:{male:.9996141195297241,female:.00038582185516133904},age:24.045934677124023},facial_points:{jaw:[[.1710530104071232,.4095061358150092],[.18407150105502135,.44714471929104876],[.1994866698323567,.48404180930154367],[.2177782957417795,.5189020595496008],[.23953823637784283,.5499980445045497],[.26652444701571626,.5753274953934604],[.2966775769490038,.5940524145311978],[.328145755642789,.604895923195421],[.3618940665173323,.5992900744685082],[.39350553651944375,.5796078644778044],[.4180432829578818,.5462761209222458],[.436981516774228,.5091265696722276],[.4482542366106451,.4678494476855503],[.4503911110722256,.42622882493653147],[.4456511111760508,.384057876217201],[.43802808746921884,.3424533375047805],[.4280445863379541,.30218205884540367]],right_eyebrow:[[.17379099627372185,.36514901771152114],[.18398353947188037,.34347941183715175],[.2022430289632907,.33007781466537917],[.22492104500601795,.32516561423972],[.24770483327798098,.3268299244605096]],left_eyebrow:[[.29601385537082103,.30658591651194467],[.31553131726181166,.2873173472480019],[.33834886262821157,.27386441680761586],[.36273105771905023,.26936438435355925],[.38508915391504667,.2799186758789603]],nose:[[.2824067400839316,.35201505503307484],[.28868532452515905,.37801469672167004],[.29536654209177504,.4035046779228473],[.301384071669357,.4287191957743301],[.2843160480631139,.4575233217841481],[.2987703488583498,.45726729492687296],[.31345801026413356,.45631620514825794],[.3266099422025036,.4466117175722059],[.339181033787092,.4359972417134728]],right_eye:[[.2077393893097449,.38869959353100386],[.2190339924765358,.3749747266019604],[.23511210188434678,.3684792271784028],[.25241908709168237,.37258208082026517],[.2384912374212062,.3830814395471754],[.2232249441481674,.38964678825979204]],left_eye:[[.3230918819466481,.34306693381183156],[.33464873239186316,.3270331646723701],[.35155174930514965,.3200902286668376],[.3687437504592203,.322530535518429],[.35608662027025356,.3348571958297786],[.3397451467448243,.34146179540520255]],lip:[[.27994801439957034,.5149523239983197],[.29249505615369426,.4978560589038524],[.30764953954801966,.4862271841730501],[.32323213343701757,.4839751671306257],[.3376879289493704,.47386780350531926],[.3598614023895732,.4723142987318426],[.3821094773290242,.4752158783125551],[.37039853666417794,.5020978456787177],[.3536543628350628,.5213957247081484],[.3365647078170611,.5306047852002546],[.3180545005225156,.53438528955682],[.2985333270305944,.5296384834111216],[.28808021601144634,.5128085738383957],[.31010415056166596,.4999868836994257],[.3265426967268193,.4944471733061399],[.3446680563502095,.48618674154126584],[.37411918987037807,.4799365236758343],[.3484538221211519,.5007802724059468],[.3302291225905008,.5110784740944114],[.3121614019462686,.5148818836693615]]},score:.9942933917045593,class_idx:0,x:.11980986701117621,y:.21631776858598759,w:.35220775180392794,h:.4063936086801382,pitch:-.21367061138153076,yaw:.07621601223945618,roll:.3555126488208771},{facial_attributes:{gender:{male:.00031887812656350434,female:.9996811151504517},age:21.418420791625977},facial_points:{jaw:[[.5549606472288725,.357363647128356],[.5459402937516361,.39704858954654093],[.539415397118824,.43766167075288914],[.5362543669157944,.477844082004199],[.5385945218222333,.5183875227234482],[.54726313535711,.5586217476955977],[.5626498986182238,.5963282795267058],[.5824121533997015,.6295431778330852],[.6125812446819167,.6497708649565138],[.6478183528984341,.6551708396342928],[.6830614495589787,.6429346746079869],[.7171358421323628,.6233968383973637],[.7467619892705505,.5963376797753005],[.7689861437009597,.5628686002449682],[.786568702229674,.5248946856455662],[.8014487684734116,.4856907241742758],[.8141540720334486,.445164679532605]],right_eyebrow:[[.5764217132246673,.3399162099245718],[.5969101033593245,.33274115653096187],[.6184061993183505,.33863933502146193],[.6388066859108061,.35248532538939925],[.6563268445281818,.37084281245676004]],left_eyebrow:[[.7029884271233137,.3874397565512613],[.7285560645534296,.38500082272961994],[.753934911822661,.38768324546057753],[.7763510534965384,.398370092223482],[.7906016028193863,.41961980358605316]],nose:[[.6706123345556101,.41000344290165985],[.6626158954622872,.4371781384437017],[.6553022363611187,.4640927354738308],[.6472606323904864,.4912005806424005],[.618426428574393,.49438733981837946],[.6297542033764897,.5054875728123126],[.6423836370833388,.5159284776129809],[.6583547037014958,.516291211110048],[.6738186351234456,.5150884099786084]],right_eye:[[.5934135174302114,.3805714892588246],[.6093079595538601,.3792287517573688],[.6250191455529746,.3861935588538491],[.63717795896622,.4010856967084431],[.620263485209968,.3994966801840444],[.6047774338714631,.39323080591385245]],left_eye:[[.7078909341757471,.4277052907179333],[.7252520987927631,.42279467200932774],[.7421567946695401,.4284014615189872],[.7556246429978638,.44039474621780805],[.7390492303983452,.4429609391817791],[.72229211964347,.4376842912714197]],lip:[[.5859089746470758,.5296512676112635],[.6044293494765751,.5285483113513516],[.6233082519631071,.5325690148922],[.6366448089305131,.5416172035788642],[.6523654482321906,.5428953565038198],[.6713170721758637,.5525422773589433],[.6893028526023975,.5659821797964293],[.6671793657012557,.5832589191593229],[.6448672833853765,.5896694205610309],[.6257709630543187,.5866546934245727],[.6091035491290839,.5779779830877521],[.5945736202292029,.5584786092488689],[.5928418238862005,.5345397339412086],[.6184017688435012,.5430586062393746],[.6336409632115587,.5506870577787236],[.6518024046628854,.5549087244030746],[.6811573840199143,.5650636144686126],[.6504811007405322,.5689929932835721],[.6311680279476182,.5665236490959592],[.6148752569230986,.5574155946826871]]},score:.9937916398048401,class_idx:0,x:.4888199869791667,y:.27895562587640227,w:.3403435601128472,h:.39270418607271634,pitch:-.2485751360654831,yaw:.13383138179779053,roll:-.3653697371482849}]}}];var face_result=face_result_samples[0];
